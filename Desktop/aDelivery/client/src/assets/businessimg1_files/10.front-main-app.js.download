(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{243:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=f(n(0)),l=f(n(22)),s=f(n(9)),i=f(n(244)),c=f(n(81)),u=f(n(21)),d=n(20);n(82);function f(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={email:"",password:"",remember:!1,isProgress:!1,isLoggedIn:!1,alertMsg:{title:"",message:"",type:"",show:!1}},n.emailRef=r.default.createRef(),n.passwordRef=r.default.createRef(),n.submitLogin=n.submitLogin.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"changeHandler",value:function(e){"email"!==e&&"password"!==e||this.setState({email:this.emailRef.current.value,password:this.passwordRef.current.value}),"remember"===e&&this.setState({remember:!this.state.remember})}},{key:"setAlertMessage",value:function(e){var t=e.title,n=e.message,o=e.show,r=e.type;this.setState(function(e){return{alertMsg:a({},e.alertMsg,{type:r,title:t,message:n,show:o})}})}},{key:"getEmail",value:function(){var e="";return this.state.email.length?e=this.state.email:this.emailRef&&void 0!==this.emailRef.current&&this.emailRef.current&&this.emailRef.current.value.length>0&&(this.setState({email:this.emailRef.current.value}),e=this.emailRef.current.value),e}},{key:"getPassword",value:function(){var e="";return this.state.password.length?e=this.state.password:this.passwordRef&&void 0!==this.passwordRef.current&&this.passwordRef.current&&this.passwordRef.current.value.length>0&&(this.setState({password:this.passwordRef.current.value}),e=this.passwordRef.current.value),e}},{key:"submitLogin",value:function(e){var t=this;e.preventDefault(),this.setState({isProgress:!0});var n={email:this.getEmail(),password:this.getPassword(),remember:this.state.remember,_token:window.csrf};l.default.post((0,d.getApiUrl)("auth"),n).then(function(e){var a=e.data.token;localStorage.setItem("authToken",a),(0,l.default)({url:(0,d.getApiUrl)("me"),method:"get",headers:{Authorization:"Bearer "+a}}).then(function(e){var a=JSON.stringify(e.data.data);localStorage.setItem("currUser",a),l.default.post((0,d.getApiUrl)("login"),n).then(function(){t.setState({isLoggedIn:!0}),t.setState({isProgress:!1}),t.setAlertMessage({title:"Success.",message:"You are logged in.",show:!0,type:"success"});var e=window.location.href.replace(location.hash,"");window.location.replace(e)})})}).catch(function(e){t.setState({isProgress:!1}),e&&e.response&&(e.response.status>=400||e.response.status<500)?t.setAlertMessage({title:"Login failed",message:"Wrong credentials provided, please check your email and password.",show:!0,type:"error"}):t.setAlertMessage({title:"Login failed",message:"There was an error on the server. Please try again later.",show:!0,type:"error"})})}},{key:"render",value:function(){var e=this;return r.default.createElement("div",{className:"component sign-in"},r.default.createElement("div",{className:"component__header"},r.default.createElement("h2",{className:"component__title"},"Sign In")),r.default.createElement("div",{className:"component__content"},r.default.createElement("form",{className:"form",method:"POST",onSubmit:this.submitLogin},this.state.alertMsg.show&&r.default.createElement(c.default,{type:this.state.alertMsg.type,title:this.state.alertMsg.title,message:this.state.alertMsg.message}),r.default.createElement("div",{className:this.state.isLoggedIn?"hidden":""},r.default.createElement("div",{className:"form__row"},r.default.createElement(i.default,{name:"email",ref:this.emailRef,label:"Email Address",isRequired:!0,value:this.state.email,onChange:function(){return e.changeHandler("email")}})),r.default.createElement("div",{className:"form__row"},r.default.createElement(i.default,{type:"password",ref:this.passwordRef,name:"password",label:"Password",isRequired:!0,value:this.state.password,onChange:function(){return e.changeHandler("password")}})),r.default.createElement("div",{className:"form__row form__row--dont-break-mobile"},r.default.createElement("div",{className:"form__column"},r.default.createElement("label",{htmlFor:"remember",className:"checkbox sign-in__remember-me"},r.default.createElement("input",{id:"remember",name:"remember",className:"checkbox__field",type:"checkbox",value:this.state.remember?"on":"off",onChange:function(){return e.changeHandler("remember")}}),r.default.createElement("span",{className:"checkbox__text"},"Remember Me"),r.default.createElement(s.default,{cssClass:"checkbox__icon",icon:"icon--checkbox-selected"}))),r.default.createElement("div",{className:"form__column"},r.default.createElement("a",{className:"font-subtext right",href:app.url+"shop/forgot-password"},"Forgot Password?"))),r.default.createElement("div",{className:"form__row"},r.default.createElement("button",{type:"submit",className:"button button--full-width",disabled:this.state.isProgress},this.state.isProgress?r.default.createElement(u.default,null):"Sign In")),r.default.createElement("div",{className:"form__row"},r.default.createElement("div",{className:"form__column"},r.default.createElement("p",{className:"font-subtext text-center"},"New to greenrush? ",r.default.createElement("a",{href:app.url+"shop/register"},"Create an Account"))))))))}}]),t}();t.default=m},244:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0)),o=r(n(9));function r(e){return e&&e.__esModule?e:{default:e}}var l=a.default.forwardRef(function(e,t){var n=e.label,r=e.name,l=e.value,s=e.type,i=e.icon,c=e.cssClass,u=e.wrapperCssClass,d=e.onChange,f=e.isRequired,m=e.isDisabled;return a.default.createElement("div",{className:"input-field js-input-field "+(u||"")+" "+(i?"input-field--icon-left":"")+" "+(m?"input-field--disabled":"")+" "+(l?"input-field--active":"")},i?function(e){return a.default.createElement("div",{className:"input-field__icon-left"},a.default.createElement(o.default,{cssClass:"input-field__icon",icon:e}))}(i):"",n?function(e){var t=e.name,n=e.label;return a.default.createElement("label",{className:"input-field__label",htmlFor:t},n)}({name:r,label:n}):"",a.default.createElement("input",{type:s||"text",className:"input-field__field "+(c||""),name:r,id:r,ref:t,defaultValue:l||"",required:f,disabled:m,onChange:d}),a.default.createElement("button",{type:"button",className:"input-field__clear-button js-clear-input"},a.default.createElement(o.default,{cssClass:"input-field__icon-clear",icon:"icon--field-clear"})))});t.default=l},73:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l(n(0)),o=l(n(243)),r=l(n(82));function l(e){return e&&e.__esModule?e:{default:e}}t.default=function(){return a.default.createElement(r.default,{id:"sign-in-modal"},a.default.createElement(o.default,null))}},81:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(0),r=s(o),l=s(n(9));function s(e){return e&&e.__esModule?e:{default:e}}var i=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),a(t,[{key:"htmlTitle",value:function(e){if(e)return r.default.createElement("h4",{className:"notification__title"},e)}},{key:"htmlMessage",value:function(e){if(e)return r.default.createElement("p",{className:"notification__text",dangerouslySetInnerHTML:{__html:e}})}},{key:"htmlAction",value:function(e){var t=this,n="";return e&&(n=void 0!==e.length?e.map(function(e,n){return r.default.createElement("p",{className:"notification__link",key:n},r.default.createElement("a",{href:e.href,className:"text-button "+(e.class?e.class:""),onClick:function(n){return t.sendGaTracking(n,e.gaTracking)}},e.content?e.content:""))}):r.default.createElement("a",{href:e.href,className:"text-button "+(e.class?e.class:""),onClick:function(n){return t.sendGaTracking(n,e.gaTracking)}},e.content)),n}},{key:"sendGaTracking",value:function(e,t){t&&void 0!==window.ga&&ga("send",t)}},{key:"render",value:function(){return r.default.createElement("div",{className:"notification notification--"+this.props.type},r.default.createElement(l.default,{cssClass:"notification__icon",icon:"success"===this.props.type?"icon--field-success":"icon--field-alert"}),this.htmlTitle(this.props.title),this.htmlMessage(this.props.message),this.htmlAction(this.props.action),this.props.children)}}]),t}();t.default=i},82:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.closeModal=t.openModal=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=s(n(0)),r=s(n(9)),l=n(84);function s(e){return e&&e.__esModule?e:{default:e}}var i=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),a(t,[{key:"render",value:function(){var e=this.props,t=e.id,n=void 0===t?"modal-no-id":t,a=e.theme,l=void 0===a?"dark":a,s=e.cssClass,i=void 0===s?"":s;return o.default.createElement("div",{id:n,className:"modal modal--"+n+" "+i,"aria-hidden":"true","data-micromodal-close":!0},o.default.createElement("div",{className:"modal__container "+("dark"===l?"background-dark":""),tabIndex:"-1",role:"dialog","aria-modal":"true","aria-labelledby":n},o.default.createElement("button",{type:"button",className:"modal__close","aria-label":"Close modal","data-micromodal-close":!0},o.default.createElement(r.default,{cssClass:"modal__close-icon",icon:"icon--close"})),this.props.children))}}]),t}();t.openModal=function(e,t,n){MicroModal.show(e,{disableScroll:!0,awaitCloseAnimation:!0,onShow:function(e){"function"==typeof t&&t(e)},onClose:function(e){"function"==typeof n&&n(e)}})},t.closeModal=function(e,t){t&&t.preventDefault(),(0,l.clearAllBodyScrollLocks)(),MicroModal.close(e)};t.default=i},84:function(e,t,n){"use strict";n.r(t),n.d(t,"disableBodyScroll",function(){return m}),n.d(t,"clearAllBodyScrollLocks",function(){return p}),n.d(t,"enableBodyScroll",function(){return h});let a=!1;if("undefined"!=typeof window){const e={get passive(){a=!0}};window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}const o="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&/iP(ad|hone|od)/.test(window.navigator.platform);let r,l,s=[],i=!1,c=-1;const u=e=>s.some(t=>!(!t.options.allowTouchMove||!t.options.allowTouchMove(e))),d=e=>{const t=e||window.event;return!!u(t.target)||(t.touches.length>1||(t.preventDefault&&t.preventDefault(),!1))},f=()=>{setTimeout(()=>{void 0!==l&&(document.body.style.paddingRight=l,l=void 0),void 0!==r&&(document.body.style.overflow=r,r=void 0)})},m=(e,t)=>{if(o){if(!e)return void console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");if(e&&!s.some(t=>t.targetElement===e)){const n={targetElement:e,options:t||{}};s=[...s,n],e.ontouchstart=(e=>{1===e.targetTouches.length&&(c=e.targetTouches[0].clientY)}),e.ontouchmove=(t=>{1===t.targetTouches.length&&((e,t)=>{const n=e.targetTouches[0].clientY-c;!u(e.target)&&(t&&0===t.scrollTop&&n>0?d(e):(e=>!!e&&e.scrollHeight-e.scrollTop<=e.clientHeight)(t)&&n<0?d(e):e.stopPropagation())})(t,e)}),i||(document.addEventListener("touchmove",d,a?{passive:!1}:void 0),i=!0)}}else{(e=>{setTimeout(()=>{if(void 0===l){const t=!!e&&!0===e.reserveScrollBarGap,n=window.innerWidth-document.documentElement.clientWidth;t&&n>0&&(l=document.body.style.paddingRight,document.body.style.paddingRight=`${n}px`)}void 0===r&&(r=document.body.style.overflow,document.body.style.overflow="hidden")})})(t);const n={targetElement:e,options:t||{}};s=[...s,n]}},p=()=>{o?(s.forEach(e=>{e.targetElement.ontouchstart=null,e.targetElement.ontouchmove=null}),i&&(document.removeEventListener("touchmove",d,a?{passive:!1}:void 0),i=!1),s=[],c=-1):(f(),s=[])},h=e=>{if(o){if(!e)return void console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");e.ontouchstart=null,e.ontouchmove=null,s=s.filter(t=>t.targetElement!==e),i&&0===s.length&&(document.removeEventListener("touchmove",d,a?{passive:!1}:void 0),i=!1)}else 1===s.length&&s[0].targetElement===e?(f(),s=[]):s=s.filter(t=>t.targetElement!==e)}}}]);